{% extends 'base_main.html' %}


{% block title %}
Профиль
{% endblock %}


{% block content %}
<div class="container-fluid" style="max-width: 800px;">
    <div class="mb-4 text-center">
        <div class="pt-1 h-100 w-auto mx-auto bg-dark text-white border rounded border-dark">
            <h4 class="font-weight-light">Личный кабинет</h4>
        </div>
    </div>
    <div class="mb-3">
        <div class="p-3 h-100 bg-dark text-white border rounded border-dark">
            <h5 class="text-center">Информация об аккаунте</h5>
            <div class="mb-2">
                <span class="h6 mr-2">Ваш ID:</span> <span id="pi_id"> {{data.id}}</span>
            </div>
            <div class="mb-2">
                <span class="h6 mr-2">Ваш логин:</span> <span id="pi_login"> {{data.name}}</span>
            </div>
            <div class="mb-2">
                <span class="h6 mr-2">Ваша почта:</span> <span id="pi_email"> {{data.email}}</span>
            </div>
        </div>
    </div>
    <div class=" mb-3">
        <div class="p-3 h-100 bg-dark text-white border rounded border-dark">
            <h5 class="text-center">Информация о подписке</h5>
            <div class="mb-2">
                <span class="h6 mr-2">Тип подписки:</span><span id="ps_type"> Стандартная</span>
            </div>
            <div class="mb-2">
                <span class="h6 mr-2">Заканчивается:</span><span id="ps_endtime"> {{data.endtime}}</span>
            </div>
            <div class="mb-2">
                <a class="btn btn-secondary disabled" href="#">Продлить подписку</a>
            </div>
        </div>
    </div>
    <div class=" mb-3">
        <div class="p-3 h-100 bg-dark text-white border rounded border-dark">
            <h5 class="text-center">Смена пароля</h5>
            <form method="post" class="mx-auto" style="max-width: 450px;">
                {% csrf_token %}
                <div class="input-group mb-4">
                    {{ form.old_password }}
                </div>
                <div class="input-group mb-2">
                    {{ form.new_password1 }}
                </div>
                <div class="input-group mb-3">
                    {{ form.new_password2 }}
                </div>
                <div class="input-group">
                    <button type="submit" class="btn btn-secondary">Сменить пароль</button>
                </div>
                
                {% for message in messages %}
                    {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
                        <div class="alert alert-success mt-3 mb-0" id="success-danger" >
                            {{ message }}
                        </div>
                    {% endif %}
                    {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
                        <div class="alert alert-danger mt-3 mb-0" id="success-danger" >
                            {{ message }}
                        </div>
                    {% endif %}
                    
                {% endfor %}
            </form>
        </div>
    </div>

</div>
{% endblock %}


{% block script %}
<script type="text/javascript">
    var form_fields = document.getElementsByTagName('input')
    form_fields[1].placeholder = 'Старый пароль...';
    form_fields[2].placeholder = 'Новый пароль...';
    form_fields[3].placeholder = 'Повторите новый пароль...';


    for (var field in form_fields) {
        form_fields[field].className += ' form-control'
    }

    $(window).on("load", info);


    function info() {
        $("#success-danger").fadeTo(10000, 500).slideUp(500, function () {
            $("#success-danger").slideUp(500);
        });
    }
</script>

{% endblock %}